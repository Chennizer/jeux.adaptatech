<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explorons le monde</title>
    <link rel="stylesheet" href="../../css/otherswitch.css">
    <link rel="stylesheet" href="../../css/global.css">
    <link rel="stylesheet" href="../../css/layout.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/games.css">
</head>
<body class="interactive-map">
    <div id="promptOverlay">
        <button id="infoButton" title="Info">ⓘ</button>
        <p>Survolez une zone et maintenez votre regard pour découvrir le monde.</p>
        <div id="loading-bar-container" style="width:80%;height:10px;background:#333;display:none;margin-bottom:20px;">
            <div id="loading-bar" style="height:100%;width:0;background:#00bfff;"></div>
        </div>
        <button id="startButton">Commencer</button>
    </div>
    <div id="infoModal" style="display:none;">
        <p>Découvrons le monde avec le contrôle oculaire.</p>
        <button id="closeModal">Fermer</button>
    </div>
    <div id="settings-icon" style="display:none;">⚙️</div>
    <div id="menu">
        <h2>Options</h2>
        <label>
            <span>Temps de fixation (ms)</span>
            <input id="dwell-time-input" type="number" value="1500">
        </label>
    </div>
    <div class="map-container" id="map-container">
        <img src="../../images/worldmap.jpg" usemap="#image-map" alt="World Map" class="world-map">
        <div id="hover-circle" class="dwell-circle"></div>
    </div>
    <div class="overlay" id="overlay"></div>
    <div id="animation-container" class="animation-container">
        <img id="zone-animation" src="" alt="Zone Animation" class="zone-animation">
    </div>
    <div id="video-container" class="video-container">
        <video id="end-video" controls>
            <source id="video-source" src="" type="video/mp4">
            Votre navigateur ne prend pas en charge la balise vidéo.
        </video>
    </div>
    <map name="image-map">
        <area target="" alt="north-america" title="Amérique du Nord" href="#" coords="442,530,369,480,260,419,191,256,42,214,167,71,476,34,857,24" shape="poly">
        <area target="" alt="south-america" title="Amérique du Sud" href="#" coords="437,545,450,686,528,940,583,986,650,806,712,647,644,560,522,487" shape="poly">
        <area target="" alt="africa" title="Afrique" href="#" coords="835,346,778,509,907,589,993,854,1161,774,1181,636,1154,582,1198,491,1064,362,949,322" shape="poly">
        <area target="" alt="europe" title="Europe" href="#" coords="1273,63,983,25,818,241,834,339,912,316,1041,343,1103,297,1163,314,1236,221" shape="poly">
        <area target="" alt="asia" title="Asie" href="#" coords="1899,137,1476,49,1271,83,1242,226,1175,316,1081,314,1085,375,1203,491,1326,535,1436,599,1521,657,1604,599" shape="poly">
        <area target="" alt="oceania" title="Océanie" href="#" coords="1743,608,1617,586,1522,718,1476,752,1482,857,1561,844,1607,928,1712,976,1783,905" shape="poly">
    </map>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/image-map-resizer/1.0.10/js/imageMapResizer.min.js"></script>
    <script src="../../js/eyegaze-menu.js"></script>
    <script src="../../js/scripts.js"></script>
    <script>
        const startGame = setupInteractiveMapGame({
            dwellTimeInputSelector: '#dwell-time-input',
            zoneEffects: {
                'north-america': { video: '../../videos/north-america.mp4' },
                'south-america': { video: '../../videos/south-america.mp4' },
                'africa': { video: '../../videos/africa.mp4' },
                'europe': { video: '../../videos/europe.mp4' },
                'asia': { video: '../../videos/asia.mp4' },
                'oceania': { video: '../../videos/oceania.mp4' }
            }
        });
        initEyegazeMenu({ onStart: startGame });
    </script>
</body>
</html>
