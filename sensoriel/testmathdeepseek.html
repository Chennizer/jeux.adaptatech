<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Apprendre les Nombres</title>
  <style>
    /* Reuse your existing CSS framework, with modifications below */
    :root {
      --primary-color: #FF6B6B; /* Child-friendly color */
      --number-color: #4ECDC4;
    }

    /* Number-specific styles */
    .card-number {
      font-size: 3rem;
      font-weight: bold;
      color: var(--number-color);
    }

    .card-dots {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      padding: 10px;
    }

    .dot {
      width: 20px;
      height: 20px;
      background: var(--primary-color);
      border-radius: 50%;
    }

    .number-line {
      display: flex;
      gap: 10px;
      padding: 20px;
      background: #FFF3E0;
      border-radius: 10px;
    }

    /* Simplified version of your existing card styles */
    .card {
      width: 120px;
      height: 120px;
      background: white;
      border: 3px solid #ddd;
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.5rem;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .card:active {
      transform: scale(0.95);
    }
  </style>
</head>
<body>
  <div class="game-container">
    <!-- Mode Selector -->
    <div class="mode-selector">
      <button onclick="setGameMode('match')" aria-label="Mode de correspondance">üî¢ ‚Üî ‚óè‚óè‚óè</button>
      <button onclick="setGameMode('sequence')" aria-label="Mode de s√©quence">1 ‚Üí 2 ‚Üí 3</button>
    </div>

    <!-- Game Area -->
    <div class="game-grid" id="gameGrid"></div>

    <!-- Number Line (For Sequence Mode) -->
    <div class="number-line" id="numberLine"></div>

    <!-- Progress & Settings -->
    <div class="progress-bar">
      <div class="progress"></div>
    </div>
    <div class="settings">
      <button onclick="toggleSound()">üîä</button>
      <button onclick="speakNumber()">üì¢</button>
    </div>
  </div>

  <!-- Audio Files -->
  <audio id="correctSound" src="sounds/correct.mp3"></audio>
  <audio id="numberSound" src="sounds/number-voice.mp3"></audio>

  <script>
    // Game Config
    const MODES = {
      MATCH: 'match',     // Match numbers to quantities
      SEQUENCE: 'sequence'// Arrange numbers in order
    };

    let currentMode = MODES.MATCH;
    let targetNumber = 1;
    const MAX_NUMBER = 10;

    // Initialize Game
    function setGameMode(mode) {
      currentMode = mode;
      initializeGame();
    }

    function initializeGame() {
      const gameGrid = document.getElementById('gameGrid');
      gameGrid.innerHTML = '';

      if (currentMode === MODES.MATCH) {
        createMatchGame();
      } else {
        createSequenceGame();
      }
    }

    // MATCH MODE: Numbers ‚Üî Quantities
    function createMatchGame() {
      const numbers = Array.from({length: MAX_NUMBER}, (_, i) => i + 1);
      const pairs = [...numbers, ...numbers].sort(() => Math.random() - 0.5);

      pairs.forEach(number => {
        const card = document.createElement('div');
        card.className = 'card';
        card.dataset.value = number;
        
        if (Math.random() > 0.5) {
          // Number card
          card.innerHTML = `<div class="card-number">${number}</div>`;
        } else {
          // Dot card
          card.innerHTML = `<div class="card-dots">${'<div class="dot"></div>'.repeat(number)}</div>`;
        }

        card.addEventListener('click', handleCardClick);
        gameGrid.appendChild(card);
      });
    }

    // SEQUENCE MODE: Drag numbers to line
    function createSequenceGame() {
      const numbers = Array.from({length: MAX_NUMBER}, (_, i) => i + 1)
                         .sort(() => Math.random() - 0.5);
      
      numbers.forEach(number => {
        const card = document.createElement('div');
        card.className = 'card';
        card.draggable = true;
        card.innerHTML = `<div class="card-number">${number}</div>`;
        card.dataset.value = number;
        
        card.addEventListener('dragstart', handleDragStart);
        card.addEventListener('click', () => placeNumber(number));
        gameGrid.appendChild(card);
      });
    }

    // Interaction Handlers
    function handleCardClick(e) {
      const card = e.target.closest('.card');
      const value = parseInt(card.dataset.value);

      // Speech feedback
      const speech = new SpeechSynthesisUtterance(value.toString());
      speech.lang = 'fr-FR';
      window.speechSynthesis.speak(speech);

      if (currentMode === MODES.MATCH) {
        // Match logic
        card.classList.add('selected');
        const selected = document.querySelectorAll('.selected');
        
        if (selected.length === 2) {
          const [a, b] = selected;
          if (a.dataset.value === b.dataset.value) {
            a.classList.add('matched');
            b.classList.add('matched');
            document.getElementById('correctSound').play();
          }
          setTimeout(() => selected.forEach(c => c.classList.remove('selected')), 1000);
        }
      }
    }

    function placeNumber(number) {
      if (number === targetNumber) {
        const numberLine = document.getElementById('numberLine');
        const numElement = document.createElement('div');
        numElement.className = 'card-number';
        numElement.textContent = number;
        numberLine.appendChild(numElement);
        targetNumber++;
        
        if (targetNumber > MAX_NUMBER) {
          showReinforcement();
        }
      }
    }

    // Reuse your reinforcement system from earlier
    function showReinforcement() {
      // Play victory video/animation
    }

    // Initialize on load
    window.addEventListener('load', initializeGame);
  </script>
</body>
</html>