<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Animated Butterfly</title>
  <script src="https://cdn.jsdelivr.net/npm/p5@1.6.0/lib/p5.js"></script>
</head>
<body>
<script>
let flapAngle = 0;

function setup() {
  createCanvas(400, 400);
}

function draw() {
  background(220);

  // Move to the center of the canvas
  translate(width / 2, height / 2);

  // Update the flap angle (oscillates over time)
  // You can adjust the multiplier (0.05) and amplitude (0.3) for different flapping speeds and range.
  flapAngle = sin(frameCount * 0.05) * 0.3;

  // Draw the butterfly
  drawButterfly();
}

function drawButterfly() {
  noStroke();

  // Body
  // Larger: width = 20, height = 100
  fill(60, 40, 20);
  rectMode(CENTER);
  rect(0, 0, 20, 100, 10); // Added some rounding on corners

  // Antennae
  stroke(50);
  strokeWeight(3);
  // Draw them near the top of the body (y = -50)
  line(-3, -50, -15, -70);
  line( 3, -50,  15, -70);
  noStroke();

  /*
    We'll do each wing in a push/pop block:
    - Translate pivot to the bodyâ€™s center.
    - Rotate for flapping effect.
    - Draw top and bottom ellipse for each wing.
  */

  // LEFT WING
  push();
    // Move pivot slightly left from the body
    translate(-15, 0);
    // Rotate negatively by flapAngle (so it moves outward/inward)
    rotate(-flapAngle);

    // More elliptical shapes for top and bottom of wing
    // Top wing
    fill(255, 120, 120);
    ellipse(0, -30, 50, 80);

    // Bottom wing
    fill(255, 160, 160);
    ellipse(0, 30, 50, 80);
  pop();

  // RIGHT WING
  push();
    // Move pivot slightly right from the body
    translate(15, 0);
    // Rotate positively by flapAngle
    rotate(flapAngle);

    // Top wing
    fill(120, 200, 255);
    ellipse(0, -30, 50, 80);

    // Bottom wing
    fill(160, 220, 255);
    ellipse(0, 30, 50, 80);
  pop();
}
</script>
</body>
</html>
