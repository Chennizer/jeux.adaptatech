<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Feather Scene â€“ Textured p5.js</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- p5.js CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      background: #000; /* fallback if canvas doesn't fill */
    }
    body {
      display: flex;
      justify-content: center;
      align-items: center;
    }
    canvas {
      display: block;
    }
  </style>
</head>
<body>
<script>
  let t = 0;

  function setup() {
    createCanvas(windowWidth, windowHeight);
    noStroke();
    noiseSeed(1234); // keep the feather shape stable
  }

  function draw() {
    drawBackground();
    drawGround();

    // subtle "breathing" motion for the feather
    const bob = sin(t) * 2;
    push();
    translate(width * 0.5, height * 0.65 + bob);
    drawFeather();
    pop();

    t += 0.02;
  }

  function drawBackground() {
    // soft blue-grey vertical gradient
    for (let y = 0; y < height; y++) {
      const inter = map(y, 0, height, 0, 1);
      const c = lerpColor(
        color(130, 145, 160),  // top
        color(100, 115, 130),  // bottom
        inter
      );
      stroke(c);
      line(0, y, width, y);
    }
  }

  function drawGround() {
    noStroke();
    fill(80, 90, 100, 220);
    beginShape();
    vertex(0, height);
    vertex(0, height * 0.7);
    bezierVertex(
      width * 0.25, height * 0.68,
      width * 0.75, height * 0.72,
      width,        height * 0.7
    );
    vertex(width, height);
    endShape(CLOSE);
  }

  // stylized feather with textured edges
  function drawFeather() {
    push();
    rotate(radians(-8));

    const L = 260;        // feather length
    const halfWBase = 36; // base half-width

    // shadow
    fill(0, 0, 0, 45);
    ellipse(20, 26, 230, 24);

    // feather body with noisy outline
    noStroke();
    fill(245);

    const steps = 42;

    beginShape();
    // top edge left -> right
    for (let i = 0; i <= steps; i++) {
      const x = map(i, 0, steps, -L / 2, L / 2);
      const tipFactor = map(abs(x), 0, L / 2, 0, 1);     // 0 center, 1 tip
      const halfW = lerp(halfWBase, 4, tipFactor);       // taper toward tip
      const n = noise(x * 0.05 + 100);                   // 0..1
      const offset = (n - 0.5) * 7;                      // small irregularity
      const y = -halfW + offset;
      vertex(x, y);
    }
    // bottom edge right -> left
    for (let i = steps; i >= 0; i--) {
      const x = map(i, 0, steps, -L / 2, L / 2);
      const tipFactor = map(abs(x), 0, L / 2, 0, 1);
      const halfW = lerp(halfWBase, 4, tipFactor);
      const n = noise(x * 0.05 + 200);
      const offset = (n - 0.5) * 7;
      const y = halfW + offset;
      vertex(x, y);
    }
    endShape(CLOSE);

    // center vein
    stroke(160);
    strokeWeight(2);
    line(-L / 2 - 12, 0, L / 2 - 24, 0);

    // small barbs lines, very subtle
    stroke(155);
    strokeWeight(1);
    const barbTop = [-90, -60, -30, 0, 30, 60];
    for (let x of barbTop) {
      line(x, 0, x + 6, -10);
    }
    const barbBottom = [-110, -80, -50, -10, 20, 50];
    for (let x of barbBottom) {
      line(x, 0, x + 6, 10);
    }

    pop();
  }

  function windowResized() {
    resizeCanvas(windowWidth, windowHeight);
  }
</script>
</body>
</html>
