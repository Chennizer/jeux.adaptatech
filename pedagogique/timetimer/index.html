<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Time Timer</title>
  <style>
    body { display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; margin:0; font-family:Arial, sans-serif; }
    canvas { background:#fff; border-radius:50%; box-shadow:0 0 10px rgba(0,0,0,0.2); }
    .controls { margin-top:20px; font-size:1.2em; }
    input[type=number] { width:60px; font-size:1em; }
    button { padding:6px 12px; font-size:1em; margin-left:5px; }
  </style>
</head>
<body>
  <canvas id="timerCanvas" width="300" height="300"></canvas>
  <div class="controls">
    <label>Minutes: <input type="number" id="minutes" min="1" max="60" value="5"></label>
    <button id="preset1">1</button>
    <button id="preset3">3</button>
    <button id="preset6">6</button>
    <button id="startBtn">Start</button>
    <button id="stopBtn">Stop</button>
  </div>
  <script>
    const canvas = document.getElementById('timerCanvas');
    const ctx = canvas.getContext('2d');
    let totalSeconds = 300; // default 5 minutes
    let remainingSeconds = 0;
    let intervalId = null;

    function draw() {
      const size = canvas.width;
      const center = size / 2;
      const radius = center - 10;
      ctx.clearRect(0, 0, size, size);

      // outer circle
      ctx.strokeStyle = '#000';
      ctx.lineWidth = 4;
      ctx.beginPath();
      ctx.arc(center, center, radius, 0, Math.PI * 2);
      ctx.stroke();

      if (remainingSeconds > 0) {
        const angle = (remainingSeconds / totalSeconds) * Math.PI * 2;
        ctx.fillStyle = '#d9534f';
        ctx.beginPath();
        ctx.moveTo(center, center);
        ctx.arc(center, center, radius - 2, -Math.PI / 2, -Math.PI / 2 + angle, false);
        ctx.closePath();
        ctx.fill();
      }

      // numbers around the clock every 5 minutes
      ctx.fillStyle = '#000';
      ctx.font = '14px Arial';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      for (let m = 5; m <= 60; m += 5) {
        const ang = (m / 60) * Math.PI * 2 - Math.PI / 2;
        const x = center + Math.cos(ang) * (radius - 20);
        const y = center + Math.sin(ang) * (radius - 20);
        ctx.fillText(m.toString(), x, y);
      }

      // remaining time text
      ctx.fillStyle = '#000';
      ctx.font = 'bold 36px Arial';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      const mins = Math.floor(remainingSeconds / 60);
      const secs = remainingSeconds % 60;
      ctx.fillText(`${String(mins).padStart(2,'0')}:${String(secs).padStart(2,'0')}`, center, center);
    }

    function startTimer() {
      totalSeconds = parseInt(document.getElementById('minutes').value, 10) * 60;
      if (isNaN(totalSeconds) || totalSeconds <= 0) return;
      remainingSeconds = totalSeconds;
      clearInterval(intervalId);
      intervalId = setInterval(() => {
        remainingSeconds--;
        if (remainingSeconds <= 0) {
          remainingSeconds = 0;
          clearInterval(intervalId);
        }
        draw();
      }, 1000);
      draw();
    }

    document.getElementById('startBtn').addEventListener('click', startTimer);
    document.getElementById('stopBtn').addEventListener('click', () => clearInterval(intervalId));
    document.getElementById('preset1').addEventListener('click', () => { document.getElementById('minutes').value = 1; startTimer(); });
    document.getElementById('preset3').addEventListener('click', () => { document.getElementById('minutes').value = 3; startTimer(); });
    document.getElementById('preset6').addEventListener('click', () => { document.getElementById('minutes').value = 6; startTimer(); });

    draw();
  </script>
</body>
</html>
